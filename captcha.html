<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>验证码示例-popup模式</title>
</head>

<body>
    <button id="j-popup">点击弹出验证码</button>
    <div id="captcha"></div>
    <script charset="UTF-8" type="text/javascript" src="http://cstaticdun.126.net/load.min.js"></script>
    <script>
    var captchaIns;
    initNECaptcha({
        element: '#captcha',
        captchaId: 'c88c6015d79b4f26a3fbafae6bebe5c8',
        mode: 'popup',
        width: '320px',
        onReady: function(instance) {
            console.log('instance', instance);
            // 验证码一切准备就绪，此时可正常使用验证码的相关功能
        },
        onVerify: function(err, data) {
            console.log('onVerify', err, data);
            /**
             * 第一个参数是err（Error的实例），验证失败才有err对象
             * 第二个参数是data对象，验证成功后的相关信息，data数据结构为key-value，如下：
             * {
             *   validate: 'xxxxx' // 二次验证信息
             * }
             */
            if (!err && data.validate) {
              // 验证通过
                alert('进行登录操作');
            } else {
                alert('验证失败');
            }
        }
    }, function onload(instance) {
        // 初始化成功
        // 初始化成功后得到验证实例instance，可以调用实例的方法
      captchaIns = instance
    }, function onerror(err) {
       // 验证码初始化失败处理逻辑，例如：提示用户点击按钮重新初始化
    })
    
    // 监听button的点击事件，弹出验证码
    document.getElementById('j-popup').addEventListener('click', function() {
        captchaIns && captchaIns.popUp();
    })
    </script>
</body>

</html>