/**
 * @fileoverview K线图Javascript API
 * @author 陈立英
 * @date 2018-05-22
 */
import { socket } from '../../../api/socket';
import TimeUtil from '../../../lib/util/date';

const defaultConfiguration = {
    symbols_types: [],
    supported_resolutions: [1, 5, 15, 30, 60, 240, "1D", "5D", "1W", "1M"],
    supports_marks: !1,
    supports_timescale_marks: !1,
    supports_time: !0,
    exchanges: [],
    supports_search: false,
    supports_group_request: true,
};

class UDFCompatibleDatafeed {
    /**
     * 初始化对象数据
     */
    constructor(cfg) {
        cfg = cfg || {};
        this.configurationData = defaultConfiguration;
        this.serverTime = null;
        this.symbol = cfg.symbol || '';
        this.currencyNameEn = cfg.currencyNameEn;
        this.baseCurrencyNameEn = cfg.baseCurrencyNameEn;
        this.pointPrice = cfg.pointPrice;
        this.timezone = cfg.timezone;
        this.resolution = '';
        this.cacheResult = {};
    }
    /**
     * 此方法旨在提供填充配置数据的对象。这些数据会影响图表的行为表现
     */
    onReady(callback) {
        var that = this;
        callback(that.configurationData);
    }
    /**
     * 通过商品名称解析商品信息
     * @param {*String 商品名称或ticker} symbolName 
     * @param {*Function(SymbolInfo)} onSymbolResolvedCallback 
     * @param {*Function(reason)} onResolveErrorCallback 
     */
    resolveSymbol(symbolName, onSymbolResolvedCallback, onResolveErrorCallback) {
        var self = this;


        setTimeout(() => {
            try {
                // 从接口获取商品名称或者代码.
                onSymbolResolvedCallback({
                    "name": symbolName,
                    "ticker": [this.baseCurrencyNameEn, this.currencyNameEn].join('_').toLocaleLowerCase(),
                    "timezone": "Asia/Shanghai",
                    "minmov": 1,
                    "session": "24x7",
                    "description": "",
                    "pricescale": this.pointPrice,
                    "has_intraday": true,
                    "has_daily": !0,
                    "has_weekly_and_monthly": !0
                });
            } catch (e) {
                console.log(e.message);
            }
        }, 0)

    }

    /**
     * 
     * @param {*Object 商品信息对象} symbolInfo 
     * @param {*String 分辨率} resolution 
     * @param {*Number 时间戳、最左边请求的K线时间} from 
     * @param {*Number 时间戳、最右边请求的K线时间} to 
     * @param {*Function(数组bars,meta={ noData = false })} onHistoryCallback  图表库希望通过onHistoryCallback仅一次调用
     * @param {*Function(reason：错误原因)} onErrorCallback 
     * @param {*Boolean 以标识是否第一次调用此商品/分辨率的历史记录} firstDataRequest 
     */
    getBars(symbolInfo, resolution, rangeStartDate, rangeEndDate, onHistoryCallback, onErrorCallback, firstDataRequest) {
        console.log('------getBars-------', symbolInfo, resolution);

        if (rangeStartDate > 0 && (rangeStartDate + "").length > 10) {
            throw "Got a JS time instead of Unix one.";
        }

        if (firstDataRequest) {
            rangeEndDate = parseInt(+new Date / 1000, 10);
        }

        var startDate = rangeStartDate * 1000;
        var endDate = rangeEndDate * 1000;

        let _resolution = this.getIntervalByPeriod(resolution);

        var requestParams = {
            symbol: symbolInfo.ticker || '',
            resolution: _resolution,
            from: startDate,
            to: endDate,
        }
        
        if (_resolution !== this.resolution) {
            this.getHistoryData(requestParams)
                .then((result)=> {
                    onHistoryCallback(result.bars, result.meta);
                })
            this.resolution = _resolution;
        }
    }

    getIntervalByPeriod(resolution) {
        switch (resolution) {
            case '1D':
            case '5D':
            case '7D':
            case '1W':
            case '1M':
                return '1D'; // 天
            default:
                return '1'; // 1秒
                break;
        }
    }
    /**
     * 
     */
    getHistoryData(params) {
        let defer = $.Deferred();

        socket.off('tradingView');
        socket.emit('tradingView', params);
        socket.on('tradingView', (data) => {
            // data = {"t":[1371686400,1371772800,1372032000,1372118400,1372204800,1372291200,1372377600,1372636800,1372723200,1372809600,1372982400,1373241600,1373328000,1373414400,1373500800,1373587200,1373846400,1373932800,1374019200,1374105600,1374192000,1374451200,1374537600,1374624000,1374710400,1374796800,1375056000,1375142400,1375228800,1375315200,1375401600,1375660800,1375747200,1375833600,1375920000,1376006400,1376265600,1376352000,1376438400,1376524800,1376611200,1376870400,1376956800,1377043200,1377129600,1377216000,1377475200,1377561600,1377648000,1377734400,1377820800,1378166400,1378252800,1378339200,1378425600,1378684800,1378771200,1378857600,1378944000,1379030400,1379289600,1379376000,1379462400,1379548800,1379635200,1379894400,1379980800,1380067200,1380153600,1380240000,1380499200,1380585600,1380672000,1380758400,1380844800,1381104000,1381190400,1381276800,1381363200,1381449600,1381708800,1381795200,1381881600,1381968000,1382054400,1382313600,1382400000,1382486400,1382572800,1382659200,1382918400,1383004800,1383091200,1383177600,1383264000,1383523200,1383609600,1383696000,1383782400,1383868800,1384128000,1384214400,1384300800,1384387200,1384473600,1384732800,1384819200,1384905600,1384992000,1385078400,1385337600,1385424000,1385510400,1385683200,1385942400,1386028800,1386115200,1386201600,1386288000,1386547200,1386633600,1386720000,1386806400,1386892800,1387152000,1387238400,1387324800,1387411200,1387497600,1387756800,1387843200,1388016000,1388102400,1388361600,1388448000,1388620800,1388707200,1388966400,1389052800,1389139200,1389225600,1389312000,1389571200,1389657600,1389744000,1389830400,1389916800,1390262400,1390348800,1390435200,1390521600,1390780800,1390867200,1390953600,1391040000,1391126400,1391385600,1391472000,1391558400,1391644800,1391731200,1391990400,1392076800,1392163200,1392249600,1392336000,1392681600,1392768000,1392854400,1392940800,1393200000,1393286400,1393372800,1393459200,1393545600,1393804800,1393891200,1393977600,1394064000,1394150400,1394409600,1394496000,1394582400,1394668800,1394755200,1395014400,1395100800,1395187200,1395273600,1395360000,1395619200,1395705600,1395792000,1395878400,1395964800,1396224000,1396310400,1396396800,1396483200,1396569600,1396828800,1396915200,1397001600,1397088000,1397174400,1397433600,1397520000,1397606400,1397692800,1398038400,1398124800,1398211200,1398297600,1398384000,1398643200,1398729600,1398816000,1398902400,1398988800,1399248000,1399334400,1399420800,1399507200,1399593600,1399852800,1399939200,1400025600,1400112000,1400198400,1400457600,1400544000,1400630400,1400716800,1400803200,1401148800,1401235200,1401321600,1401408000,1401667200,1401753600,1401840000,1401926400,1402012800,1402272000,1402358400,1402444800,1402531200,1402617600,1402876800,1402963200,1403049600,1403136000,1403222400,1403481600,1403568000,1403654400,1403740800,1403827200,1404086400,1404172800,1404259200,1404345600,1404691200,1404777600,1404864000,1404950400,1405036800,1405296000,1405382400,1405468800,1405555200,1405641600,1405900800,1405987200,1406073600,1406160000,1406246400,1406505600,1406592000,1406678400,1406764800,1406851200,1407110400,1407196800,1407283200,1407369600,1407456000,1407715200,1407801600,1407888000,1407974400,1408060800,1408320000,1408406400,1408492800,1408579200,1408665600,1408924800,1409011200,1409097600,1409184000,1409270400,1409616000,1409702400,1409788800,1409875200,1410134400,1410220800,1410307200,1410393600,1410480000,1410739200,1410825600,1410912000,1410998400,1411084800,1411344000,1411430400,1411516800,1411603200,1411689600,1411948800,1412035200,1412121600,1412208000,1412294400,1412553600,1412640000,1412726400,1412812800,1412899200,1413158400,1413244800,1413331200,1413417600,1413504000,1413763200,1413849600,1413936000,1414022400,1414108800,1414368000,1414454400,1414540800,1414627200,1414713600,1414972800,1415059200,1415145600,1415232000,1415318400,1415577600,1415664000,1415750400,1415836800,1415923200,1416182400,1416268800,1416355200,1416441600,1416528000,1416787200,1416873600,1416960000,1417132800,1417392000,1417478400,1417564800,1417651200,1417737600,1417996800,1418083200,1418169600,1418256000,1418342400,1418601600,1418688000,1418774400,1418860800,1418947200,1419206400,1419292800,1419379200,1419552000,1419811200,1419897600,1419984000,1420156800,1420416000,1420502400,1420588800,1420675200,1420761600,1421020800,1421107200,1421193600,1421280000,1421366400,1421712000,1421798400,1421884800,1421971200,1422230400,1422316800,1422403200,1422489600,1422576000,1422835200,1422921600,1423008000,1423094400,1423180800,1423440000,1423526400,1423612800,1423699200,1423785600,1424131200,1424217600,1424304000,1424390400,1424649600,1424736000,1424822400,1424908800,1424995200,1425254400,1425340800,1425427200,1425513600,1425600000,1425859200,1425945600,1426032000,1426118400,1426204800,1426464000,1426550400,1426636800,1426723200,1426809600,1427068800,1427155200,1427241600,1427328000,1427414400,1427673600,1427760000,1427846400,1427932800,1428278400,1428364800,1428451200,1428537600,1428624000,1428883200,1428969600,1429056000,1429142400,1429228800,1429488000,1429574400,1429660800,1429747200,1429833600,1430092800,1430179200,1430265600,1430352000,1430438400,1430697600,1430784000,1430870400,1430956800,1431043200,1431302400,1431388800,1431475200,1431561600,1431648000,1431907200,1431993600,1432080000,1432166400,1432252800,1432598400,1432684800,1432771200,1432857600,1433116800,1433203200,1433289600,1433376000,1433462400,1433721600,1433808000,1433894400,1433980800,1434067200,1434326400,1434412800,1434499200,1434585600,1434672000,1434931200,1435017600,1435104000,1435190400,1435276800,1435536000,1435622400,1435708800,1435795200,1436140800,1436227200,1436313600,1436400000,1436486400,1436745600,1436832000,1436918400,1437004800,1437091200,1437350400,1437436800,1437523200,1437609600,1437696000,1437955200,1438041600,1438128000,1438214400,1438300800,1438560000,1438646400,1438732800,1438819200,1438905600,1439164800,1439251200,1439337600,1439424000,1439510400,1439769600,1439856000,1439942400,1440028800,1440115200,1440374400,1440460800,1440547200,1440633600,1440720000,1440979200,1441065600,1441152000,1441238400,1441324800,1441670400,1441756800,1441843200,1441929600,1442188800,1442275200,1442361600,1442448000,1442534400,1442793600,1442880000,1442966400,1443052800,1443139200,1443398400,1443484800,1443571200,1443657600,1443744000,1444003200,1444089600,1444176000,1444262400,1444348800,1444608000,1444694400,1444780800,1444867200,1444953600,1445212800,1445299200,1445385600,1445472000,1445558400,1445817600,1445904000,1445990400,1446076800,1446163200,1446422400,1446508800,1446595200,1446681600,1446768000,1447027200,1447113600,1447200000,1447286400,1447372800,1447632000,1447718400,1447804800,1447891200,1447977600,1448236800,1448323200,1448409600,1448582400,1448841600,1448928000,1449014400,1449100800,1449187200,1449446400,1449532800,1449619200,1449705600,1449792000,1450051200,1450137600,1450224000,1450310400,1450396800,1450656000,1450742400,1450828800,1450915200,1451260800,1451347200,1451433600,1451520000,1451865600,1451952000,1452038400,1452124800,1452211200,1452470400,1452556800,1452643200,1452729600,1452816000,1453161600,1453248000,1453334400,1453420800,1453680000,1453766400,1453852800,1453939200,1454025600,1454284800,1454371200,1454457600,1454544000,1454630400,1454889600,1454976000,1455062400,1455148800,1455235200,1455580800,1455667200,1455753600,1455840000,1456099200,1456185600,1456272000,1456358400,1456444800,1456704000,1456790400,1456876800,1456963200,1457049600,1457308800,1457395200,1457481600,1457568000,1457654400,1457913600,1458000000,1458086400,1458172800,1458259200,1458518400,1458604800,1458691200,1458777600,1459123200,1459209600,1459296000,1459382400,1459468800,1459728000,1459814400,1459900800,1459987200,1460073600,1460332800,1460419200,1460505600,1460592000,1460678400,1460937600,1461024000,1461110400,1461196800,1461283200,1461542400,1461628800,1461715200,1461801600,1461888000,1462147200,1462233600,1462320000,1462406400,1462492800,1462752000,1462838400,1462924800,1463011200,1463097600,1463356800,1463443200,1463529600,1463616000,1463702400,1463961600,1464048000,1464134400,1464220800,1464307200,1464652800,1464739200,1464825600,1464912000,1465171200,1465257600,1465344000,1465430400,1465516800,1465776000,1465862400,1465948800,1466035200,1466121600,1466380800,1466467200,1466553600,1466640000,1466726400,1466985600,1467072000,1467158400,1467244800,1467331200,1467676800,1467763200,1467849600,1467936000,1468195200,1468281600,1468368000,1468454400,1468540800,1468800000,1468886400,1468972800,1469059200,1469145600,1469404800,1469491200,1469577600,1469664000,1469750400,1470009600,1470096000,1470182400,1470268800,1470355200,1470614400,1470700800,1470787200,1470873600,1470960000,1471219200,1471305600,1471392000,1471478400,1471564800,1471824000,1471910400,1471996800,1472083200,1472169600,1472428800,1472515200,1472601600,1472688000,1472774400,1473120000,1473206400,1473292800,1473379200,1473638400,1473724800,1473811200,1473897600,1473984000,1474243200,1474329600,1474416000,1474502400,1474588800,1474848000,1474934400,1475020800,1475107200,1475193600,1475452800,1475539200,1475625600,1475712000,1475798400,1476057600,1476144000,1476230400,1476316800,1476403200,1476662400,1476748800,1476835200,1476921600,1477008000,1477267200,1477353600,1477440000,1477526400,1477612800,1477872000,1477958400,1478044800,1478131200,1478217600,1478476800,1478563200,1478649600,1478736000,1478822400,1479081600,1479168000,1479254400,1479340800,1479427200,1479686400,1479772800,1479859200,1480032000,1480291200,1480377600,1480464000,1480550400,1480636800,1480896000,1480982400,1481068800,1481155200,1481241600,1481500800,1481587200,1481673600,1481760000,1481846400,1482105600,1482192000,1482278400,1482364800,1482451200,1482796800,1482883200,1482969600,1483056000,1483401600,1483488000,1483574400,1483660800,1483920000,1484006400,1484092800,1484179200,1484265600,1484611200,1484697600,1484784000,1484870400,1485129600,1485216000,1485302400,1485388800,1485475200,1485734400,1485820800,1485907200,1485993600,1486080000,1486339200,1486425600,1486512000,1486598400,1486684800,1486944000,1487030400,1487116800,1487203200,1487289600,1487635200,1487721600,1487808000,1487894400,1488153600,1488240000,1488326400,1488412800,1488499200,1488758400,1488844800,1488931200,1489017600,1489104000,1489363200,1489449600,1489536000,1489622400,1489708800,1489968000,1490054400,1490140800,1490227200,1490313600,1490572800,1490659200,1490745600,1490832000,1490918400,1491177600,1491264000,1491350400,1491436800,1491523200,1491782400,1491868800,1491955200,1492041600,1492387200,1492473600,1492560000,1492646400,1492732800,1492992000,1493078400,1493164800,1493251200,1493337600,1493596800,1493683200,1493769600,1493856000,1493942400,1494201600,1494288000,1494374400,1494460800,1494547200,1494806400,1494892800,1494979200,1495065600,1495152000,1495411200,1495497600,1495584000,1495670400,1495756800,1496102400,1496188800,1496275200,1496361600,1496620800,1496707200,1496793600,1496880000],"o":[419.3,418.49,407.4,405.7,403.9,399.25,391.36,402.69,409.96,420.86,420.39,420.11,413.6,419.6,422.95,427.65,425.01,426.52,429.7,433.38,433.1,429.46,426,438.93,440.7,435.3,440.8,449.96,454.99,455.7527,458.01,464.69,468.02,463.8,463.855,458.64,456.86,470.94,497.88,496.42,500.15,504.34,509.71,503.59,504.98,503.27,500.75,498,486,491.65,492,493.1,499.56,500.25,498.44,505,506.2,467.0101,468.5,469.3402,461,447.96,463.18,470.7,478,496.1,494.88,489.2,486,483.78,477.25,478.45,485.63,490.51,483.86,486.56,489.94,484.64,491.32,486.99,489.83,497.505,500.79,499.98,505.99,511.77,526.405,519,525,531.315,529.04,536.27,519.61,525,524.02,521.1,524.58,524.15,519.58,514.58,519.99,517.67,518,522.81,526.58,524.99,519.03,519.23,517.6,519.52,521.02,524.12,536.3098,549.48,558,558.3,565.5,572.65,565.79,560.9001,563.58,567,562.1415,562.85,555.02,555.81,549.7,549.5,545.43,568,569.89,568.1,563.82,557.46,554.17,555.68,552.86,537.45,544.32,538.81,546.8,539.83,529.91,538.22,553.52,554.9,551.48,540.99,550.9147,549.94,554,550.07,508.76,503.95,502.54,495.18,502.61,505.85,506.56,510.06,521.38,518.66,530.61,536.95,534.66,542.47,546,544.75,532.99,532.7927,523.15,529.38,523.61,517.14,529.08,523.42,531,530.92,532.79,531.09,528.36,535.45,534.51,537.44,528.79,527.7,525.9,532.26,529.89,531.93,538.42,541.5,546.52,540.015,538.32,539.23,537.76,542.38,541.39,539.81,528.02,525.19,522.64,530.68,519,521.9,520.27,518.05,520,525.34,528.31,529.06,568.21,564.53,572.8,593.74,592.64,592,592.34,590.14,601.8,595.25,588.25,584.54,587.49,592,592.43,594.7,588.63,597.85,604.51,603.83,606.6,607.25,615.88,626.02,627.85,637.98,633.96,628.46,637.44,646.2,649.9,92.7,94.73,94.13,94.04,92.2,91.51,92.31,92.27,92.29,91.85,91.32,90.75,90.21,90.37,90.82,92.1,93.52,93.865,93.67,94.14,96.27,95.44,93.76,95.36,95.86,96.8,96.97,95.03,93.62,94.99,94.68,95.42,97.035,96.85,97.82,99.33,98.44,97.16,94.9,96.37,95.36,94.75,94.93,94.26,95.27,96.04,96.15,97.33,97.9,98.49,99.41,100.44,100.57,100.29,101.79,101.42,101.02,101.59,102.86,103.06,103.1,98.85,98.8,99.3,99.08,98.01,100.41,101.21,102.81,99.8,101.27,101.93,102.29,101.8,100.6,102.16,100.51,98.53,98.65,100.81,100.59,99.27,99.44,99.95,99.43,98.76,101.54,100.69,101.33,100.39,97.97,95.55,97.5,98.315,103.02,102.84,104.08,105.18,104.85,105.4,106.65,106.959,108.01,108.22,109.36,109.1,108.6,108.75,109.02,108.7,109.38,111.8,113.15,114.27,113.94,115.44,114.91,117.51,116.85,119.07,117.94,119.27,118.81,113.5,115.75,115.77,115.99,114.1,110.19,114.41,112.26,110.46,110.7,106.37,107.12,111.87,112.26,112.16,113.23,112.58,112.1,113.79,113.64,112.82,111.39,108.29,106.54,107.2,109.23,112.67,112.6,111.43,109.04,110,107.03,107.84,108.95,110.26,112.3,113.74,112.42,117.625,116.32,118.4,118.05,118.5,118.5,120.02,120.02,118.55,120.17,122.77,126.06,127.28,127.49,127.625,128.48,128.62,130.02,132.94,131.56,128.785,130,129.25,128.96,129.1,128.58,128.4,127.96,126.41,124.75,122.31,124.4,123.88,125.9,127,128.75,128.25,127.12,127.23,126.54,122.76,124.57,124.05,126.09,124.82,125.03,124.47,127.64,125.85,125.85,125.95,128.37,127,126.41,126.28,125.55,125.57,128.1,126.99,128.3,130.49,132.31,134.455,130.16,127.5,126.1,129.5,128.15,126.56,124.77,126.68,127.39,125.6,126.15,127.41,129.07,128.38,130.69,130,130.07,131.6,132.6,130.34,131.86,131.23,131.2,129.86,130.66,129.58,129.5,128.9,126.7,127.92,129.18,128.185,126.1,127.03,127.72,127.23,127.71,127.49,127.48,127.21,128.86,127.67,125.46,125.57,126.9,126.43,124.94,125.89,124.48,123.85,121.94,125.03,126.04,125.72,127.74,129.08,130.97,132.85,121.99,126.2,125.32,123.09,123.38,123.15,122.32,122.6,121.5,117.42,112.95,115.97,114.58,116.53,117.81,112.53,116.04,114.32,116.04,116.43,116.1,114.08,110.43,94.87,111.11,107.085,112.25,112.17,112.13,110.18,110,112.49,108.97,111.65,113.76,110.27,111.79,116.58,115.93,116.25,115.66,112.21,113.67,113.38,113.63,113.25,116.44,113.85,112.83,110.17,109.07,108.01,109.88,110.63,111.74,110.19,110,112.73,110.82,111.29,110.93,111.78,110.8,111.34,114,114.33,116.7,118.08,115.4,116.93,118.7,120.99,119.87,120.79,123.13,121.85,121.11,120.96,116.9,116.37,116.26,115.2,111.38,114.92,115.76,117.64,119.2,119.27,117.33,119.21,118.29,117.99,118.75,117.05,116.55,115.29,118.98,117.52,117.64,116.04,115.19,112.18,111.94,111.07,112.02,108.91,107.28,107.4,107.27,109,107.59,106.96,108.58,107.01,102.61,105.75,100.56,98.68,98.55,98.97,100.55,100.32,97.96,96.2,98.41,95.1,97.06,98.63,101.52,99.93,96.04,93.79,94.79,96.47,95.42,95,95.86,96.52,93.13,94.29,95.92,93.79,94.19,95.02,96.67,98.84,96,96.31,96.4,93.98,96.05,97.2,96.86,97.65,100.51,100.58,102.37,102.39,100.78,101.31,101.41,102.24,101.91,103.96,104.61,105.52,106.34,105.93,105.25,106.48,105.47,106,104.89,108.65,109.72,108.78,110.42,109.51,110.23,109.95,108.91,108.97,109.34,110.8,111.62,112.11,108.89,107.88,106.64,106.93,105.01,105,103.91,96,97.61,93.99,93.965,94.2,95.2,94,93.37,93,93.33,93.48,92.72,90,92.39,94.55,94.16,94.64,94.64,95.87,97.22,98.67,99.68,99.44,99.6,99.02,97.6,97.79,97.99,99.25,99.02,98.5,98.53,98.69,97.32,97.82,96.45,96.62,96,94.94,96.25,95.94,92.91,93,92.9,93.97,94.44,95.49,95.39,94.6,95.7,96.49,96.75,97.17,97.41,97.39,98.92,98.7,99.56,100,99.83,99.26,98.25,96.82,104.265,102.83,104.19,104.41,106.05,104.81,105.58,106.27,107.52,108.23,108.71,108.52,107.78,108.14,109.63,109.1,109.23,108.77,108.86,108.59,108.565,107.39,107.41,106.62,105.8,105.66,106.14,107.7,107.9,107.83,107.25,104.64,102.65,107.51,108.73,113.86,115.12,115.19,113.05,113.85,114.35,114.42,111.64,113,113.69,113.16,112.46,112.71,113.06,113.4,113.7,114.31,115.02,117.7,117.35,116.79,117.88,117.33,118.18,117.25,116.86,116.81,117.1,117.95,114.31,115.39,113.87,113.65,113.46,111.4,110.98,108.53,110.08,110.31,109.88,111.09,106.92,107.32,106.57,106.7,109.81,109.72,110.12,111.95,111.36,111.13,111.43,110.78,111.56,110.365,109.17,110,109.5,109.26,110.86,112.31,113.29,113.84,115.04,115.38,116.47,115.8,116.74,116.8,116.35,115.59,116.52,117.52,116.45,116.65,115.8,115.85,115.92,116.78,117.95,118.77,118.74,118.895,119.11,118.34,120,119.4,120.45,120,119.55,120.42,121.67,122.14,120.93,121.15,127.03,127.975,128.31,129.13,130.54,131.35,131.65,132.46,133.08,133.47,135.52,135.67,135.1,136.23,136.43,137.38,135.91,137.14,137.08,137.89,140,138.78,139.365,139.06,138.95,138.74,139.25,138.85,139.3,139.41,140.72,141,140.4,142.11,139.845,141.26,141.5,139.39,140.91,143.68,144.19,143.72,143.71,143.25,144.22,144.29,143.73,143.6,142.94,141.6,141.91,141.48,141.41,141.88,141.22,142.44,143.5,143.91,144.47,143.9225,144.09,145.1,147.54,145.59,146.52,146.76,149.03,153.87,153.63,152.45,154.7,156.01,155.94,153.6,151.27,153.38,154,154.9,153.84,153.73,154,153.42,153.97,153.17,153.58,154.34,153.9,155.02,155.25],"h":[425.98,420,408.66,407.79,404.79,401.39,400.27,412.27,421.63,422.98,423.29,421,423.5,424.8,428.25,429.79,431.46,430.71,432.22,434.87,433.98,429.75,426.96,444.59,441.4,441.04,449.99,457.15,457.3425,456.8,462.85,470.67,471.89,467,464.1,460.46,468.65,494.66,504.25,502.399,502.94,513.74,510.57,507.15,505.59,503.35,510.2,502.51,495.8,496.5,492.95,500.6,502.24,500.68,499.38,507.92,507.45,473.69,475.4,471.8292,461.6099,459.71,466.35,475.83,478.55,496.91,495.47,489.64,488.56,484.67,481.66,489.14,491.8,492.35,484.6,492.65,490.64,487.79,492.38,493.84,497.58,502,502.53,504.78,509.26,524.3,528.4496,525.67,532.47,533.23,531,539.25,527.52,527.49,524.8,526.82,528.885,524.86,523.19,521.13,521.67,523.92,522.25,529.28,529.09,527.19,523.38,520.42,521.21,522.16,525.87,536.14,546,558.33,564.3299,566.38,569.19,575.1358,566.75,569.58,567.88,570.97,565.34,562.88,562.6389,559.44,551.45,550,551.61,570.72,571.88,569.5,564.41,560.09,561.28,557.03,553.7,546.8,545.96,545.56,546.86,540.8,542.5,546.73,560.2,556.85,552.07,550.07,557.29,556.5,555.62,554.8,515,507.37,506.5,501.53,507.73,509.46,515.28,513.5,522.9299,531.99,537.75,539.56,544.85,545.9799,551.19,546.89,537,534.57,529.9199,529.565,525,528.78,532.75,530.65,532.64,534.75,534.4399,531.98,533.33,538.74,537.35,539.66,530.89,529.97,531.97,536.24,532.67,533.75,540.5,545.75,549,541.5,538.9399,540.81,541.87,543.48,542.5,540,530.9,526.12,530.49,532.24,522.83,522.16,521.64,521.09,527.76,532.14,531.826,531.13,570,571.99,595.75,595.98,599.43,594.8,594.2,601,604.4099,597.29,594.41,586.25,593.66,594.54,597.4,596.6,597.53,607.33,606.4,606.7,609.85,614.7293,625.86,629.83,636.87,644.17,634.83,638.74,647.89,649.3699,651.26,93.88,95.05,94.76,94.12,92.44,92.75,92.7,92.29,92.3,92.55,91.62,91.74,90.7,91.05,92,93.725,94.07,94.06,94.1,95.99,96.8,95.95,95.55,95.89,96.89,96.85,97.1,95.279,94.74,95,94.89,97.88,97.32,97.84,99.24,99.44,98.7,97.45,96.62,96.58,95.68,95.48,95.95,94.82,96.08,96.88,97.24,97.57,98.19,99.37,100.68,101.09,100.94,101.47,102.17,101.5,102.57,102.78,102.9,103.74,103.2,100.09,99.39,99.31,103.08,101.11,101.44,102.19,103.05,101.26,101.8,102.35,102.35,102.14,102.94,102.85,100.71,100.75,100.435,101.54,100.69,100.22,100.21,100.65,100.12,101.11,102.38,102.03,101.78,100.52,99.15,97.72,99,99.96,103.02,104.11,105.051,105.49,105.48,106.74,107.37,107.35,108.04,110.3,109.49,109.3,108.79,109.32,109.33,109.75,111.43,113.45,114.19,117.28,115.69,115.74,116.86,117.57,118.77,119.75,119.1,119.4,119.25,115.75,116.35,117.2,116.08,114.648,114.3,114.85,113.8,111.87,111.6,110.16,109.84,112.65,113.24,113.49,113.33,112.71,114.52,114.77,113.92,113.13,111.44,108.65,107.43,108.2,112.15,113.25,112.63,112.8,110.49,110.06,107.58,108.9667,111.06,112.47,113.75,114.3626,112.48,118.12,119.19,120,119.17,119.09,120.51,120.23,120.25,119.84,122.15,124.92,127.48,127.28,128.88,128.78,129.03,129.5,133,133.6,131.6,130.87,130.57,130.28,129.52,129.56,128.75,129.37,129.57,127.22,124.77,124.9,125.3951,124.95,127.32,129.16,129.2451,128.4,127.85,128.04,126.82,124.88,124.7,126.4,126.49,125.12,125.56,127.51,128.1218,126.4,126.58,127.21,128.57,127.29,127.13,127.1,126.14,128.12,128.2,128.87,130.42,130.63,133.13,134.54,131.59,127.88,130.13,130.57,128.4498,126.75,126.08,127.62,127.56,126.88,127.19,128.95,129.49,130.72,130.88,130.98,131.63,132.97,132.91,132.26,131.95,131.45,131.39,130.655,130.94,130.58,129.69,129.21,128.08,129.34,130.18,128.33,127.24,127.85,127.88,128.31,127.82,128.06,127.61,129.8,129.2,127.99,126.47,126.12,126.94,126.69,126.23,126.15,124.64,124.06,123.85,125.755,126.37,127.15,128.57,129.62,132.97,132.92,125.5,127.09,125.74,123.61,123.91,123.5,122.5699,122.6425,122.57,117.7,117.44,116.5,116.25,119.99,118.18,115.42,116.4,116.31,117.65,117.44,116.52,114.35,111.9,108.8,111.11,109.89,113.24,113.31,114.53,111.88,112.34,112.78,110.45,112.56,114.02,113.2825,114.21,116.89,116.53,116.54,116.49,114.3,115.37,114.18,114.72,115.5,116.69,114.57,113.51,111.54,109.62,111.0136,111.3698,111.74,111.77,110.19,112.28,112.75,112.45,111.52,112.1,112,111.75,114.17,115.58,115.5,119.228,118.13,116.54,119.3,120.69,121.22,121.36,123.49,123.82,122.69,121.81,121.81,118.07,117.42,116.82,115.57,114.24,115.05,117.49,119.75,119.92,119.73,119.35,119.23,118.41,119.41,118.81,118.11,116.79,119.25,119.86,118.6,117.69,116.94,115.39,112.68,112.8,111.99,112.25,109.52,107.37,107.72,108.85,109,107.69,109.43,108.7,107.03,105.368,105.85,102.37,100.13,99.11,99.06,100.69,101.19,100.48,97.71,98.65,98.1897,97.88,101.46,101.53,100.88,96.6289,94.52,97.34,96.71,96.04,96.84,97.33,96.92,95.7,95.94,96.35,94.72,94.5,96.85,98.21,98.89,96.7599,96.9,96.5,96.38,96.76,98.0237,98.23,100.77,100.89,101.7099,103.75,102.83,101.76,101.58,102.24,102.28,102.91,105.18,106.31,106.47,106.5,107.65,107.29,107.07,106.25,106.19,107.79,110.42,109.9,110,112.19,110.73,110.98,110.42,109.77,110.61,110.5,112.34,112.39,112.3,108.95,108,108.09,106.93,106.48,105.65,105.3,98.71,97.88,94.72,94.08,95.74,95.9,94.07,93.45,93.77,93.57,93.57,92.78,91.67,94.39,94.7,95.21,94.64,95.43,97.19,98.09,99.74,100.73,100.47,100.4,99.54,97.84,98.27,101.89,99.87,99.56,99.99,99.3457,99.12,98.475,98.41,97.75,96.65,96.57,96.35,96.89,96.29,94.655,93.05,93.66,94.55,95.77,96.465,95.4,95.66,96.5,96.89,97.65,97.7,97.67,98.99,99.3,100.13,100,100.46,101,99.3,98.84,97.97,104.35,104.45,104.55,106.15,106.07,105.84,106,107.65,108.37,108.94,108.9,108.93,108.44,109.54,110.23,109.37,109.6,109.69,109.1,109.32,108.75,107.88,107.95,107.44,106.5,106.5699,106.8,108,108.3,108.76,107.27,105.72,105.72,108.79,113.03,115.73,116.13,116.18,114.12,113.989,114.94,114.79,113.39,113.18,114.64,113.8,113.37,113.05,114.31,113.66,114.34,114.56,116.75,118.69,117.98,117.44,118.17,117.84,118.21,117.76,117.38,116.91,117.74,118.36,115.7,115.86,115.21,114.23,113.77,112.35,111.46,110.25,110.51,111.72,111.32,111.09,108.87,107.809,107.68,110.23,110.35,110.54,111.99,112.42,111.51,111.87,112.465,112.03,112.2,110.94,110.09,110.03,110.36,111.19,112.43,114.7,115,115.92,116.2,116.73,116.5,117.38,117.5,117.4,116.51,116.52,117.8,118.0166,117.1095,117.2,116.33,116.51,116.8642,118.16,119.43,119.38,119.93,119.3,119.62,120.24,120.5,120.09,120.45,120.81,120.1,122.1,122.44,122.35,121.63,121.39,130.49,129.39,129.19,130.5,132.09,132.22,132.445,132.94,133.82,135.09,136.27,135.9,135.83,136.75,137.12,137.48,136.66,137.435,137.435,140.15,140.2786,139.83,139.77,139.98,139.8,138.79,139.3571,139.43,139.65,140.7501,141.02,141,141.5,142.8,141.6,141.5844,141.74,141.22,144.04,144.49,144.5,144.27,144.12,144.89,145.46,144.52,144.18,143.8792,143.35,142.15,142.38,141.88,142.04,142,142.92,142.68,143.95,144.9,144.6,144.16,144.3,147.2,148.09,147.49,147.14,148.98,153.7,154.88,153.94,154.07,156.42,156.65,156.06,154.57,153.34,153.98,154.58,154.9,154.17,154.35,154.24,154.43,154.17,153.33,155.45,154.45,155.81,155.98,155.54],"l":[415.17,408.1001,398.05,398.83,395.66,393.54,388.87,401.22,409.47,417.45,415.35,410.65,410.38,418.25,421.1701,423.41,424.8,424.17,428.22,430.61,424.35,425.468,418.71,435.26,435.81,434.34,440.2,449.23,449.43,453.26,456.66,462.15,462.17,461.77,457.95,453.65,456.63,468.05,493.4,489.0833,498.86,504,500.82,501.2,498.2,499.35,500.5,486.3,486,491.13,486.5,487.35,496.28,493.64,489.95,503.48,489.5,464.81,466.01,464.7,447.22,447.5,460.66,469.25,466,482.6,487.82,481.4301,483.9,480.72,474.411,478.381,483.75,480.7387,478.6,485.35,480.54,478.28,487.04,485.16,489.35,495.52,499.23,499.68,505.71,511.52,508.03,519,522.45,525.11,523.21,514.54,517.02,521.27,515.84,518.81,523,518.2,512.38,512.59,514.41,517,516.96,521.87,524.49,518.2,517.97,514.33,513.67,518.53,521,524,533.4,547.81,550.82,557.68,560.82,566.41,559.57,560.9001,561.2,559.69,560.03,553.67,555.01,553.375,538.8,543.7301,544.8175,562.76,566.03,563.376,559.5,552.321,554,552.021,540.43,533.6,537.925,538.69,535.3501,531.11,529.88,537.66,551.66,551.68,539.9,540.42,547.81,544.8064,544.75,545.75,502.07,498.62,496.7,493.55,499.3,502.76,506.2519,507.81,517.38,518,529.5,533.24,534.2,541.21,545.61,534.35,529,524.6,522.42,521,515.6,516.05,522.12,522.81,527.77,529.13,528.1,526.05,528.3391,532.59,532,529.16,523,525.85,525.2001,529,527.35,526.33,535.06,539.59,538.86,535.1201,534.25,535.93,536.77,540.26,537.64,530.58,521.89,518.7001,522.02,523.17,517.14,517.21,511.33,514.1354,519.2,523.96,526.501,524.45,560.73,563.96,572.55,589.51,589.8,586.36,589.71,590,594.41,587.73,586.4,580.33,587.4,590.7,591.74,588.04,585.4,597.33,600.73,602.06,604.1,606.47,615.63,623.78,627.77,628.9,622.5,628.25,636.11,642.61,644.47,91.75,93.57,93.47,91.9,90.88,91.45,91.8,91.35,91.3389,90.9,90.6,90.19,89.65,89.8,90.77,92.09,93.13,93.09,93.2,94.1,93.92,94.76,93.52,94.8625,95.65,95.03,94.74,92.57,93.02,93.72,94.12,95.17,96.42,96.64,97.55,98.25,97.67,95.33,94.81,95.17,94.36,94.71,94.1,93.28,94.8355,95.61,96.04,96.8,96.86,97.98,99.32,99.95,100.11,100.19,101.28,100.86,100.7,101.56,102.2,102.72,98.58,97.79,98.31,98.05,96.14,97.76,99.62,101.08,101.44,98.89,100.5922,101.56,100.88,100.58,100.54,101.2,97.72,98.4,98.63,100.53,98.7,98.04,99.04,99.42,98.73,98.31,100.61,100.3,99.81,98.57,95.18,95.41,96.81,98.22,101.27,102.6,103.63,104.53,104.7,105.35,106.36,105.9,107.21,108.01,107.72,108.125,107.8,108.55,108.67,108.4,109.37,111.6,113.05,113.3,113.89,113.8,114.85,116.03,116.62,117.45,117.83,118.05,111.27,112.75,115.11,115.29,114.64,111.62,109.35,111.54,111.34,109.58,106.35,106.26,106.82,110.66,111.66,111.97,112.46,112.01,112.01,113.7,112.11,110.21,107.35,105.41,104.63,106.695,108.7,110.21,108.8,108.91,108.5,106.66,105.2,106.5,108.27,109.72,111.53,112.8,109.03,115.31,115.56,116.85,116.08,117.61,118.309,119.25,118.45,118.43,120.16,122.5,125.57,125.65,126.92,127.45,128.33,128.05,129.66,131.17,128.15,126.61,128.24,128.3,128.09,128.32,125.76,126.26,125.06,123.8,122.11,121.63,122.58,122.87,125.65,126.37,127.4,125.16,126.52,126.56,123.38,122.6,122.91,124,124.355,123.1,124.19,124.33,125.98,124.97,124.66,125.26,126.61,125.91,126.01,126.11,124.46,125.17,126.67,126.32,128.14,129.23,131.15,129.57,128.3,124.58,125.3,128.26,125.78,123.36,124.02,126.11,125.625,124.82,125.87,127.16,128.21,128.36,129.64,129.34,129.83,131.4,129.12,130.05,131.1,129.9,130.05,129.32,129.9,128.91,128.36,126.83,125.62,127.85,128.475,127.11,125.71,126.37,126.74,127.22,126.4,127.08,126.8792,127.12,127.5,126.51,124.48,124.86,125.99,125.77,124.85,123.77,122.54,119.22,121.21,124.32,125.04,125.58,127.35,128.31,130.7,130.32,121.99,125.06,123.9,122.12,122.55,122.27,121.71,120.91,117.52,113.25,112.1,114.115,114.5,116.53,113.33,109.63,114.54,114.01,115.5,116.01,114.68,111.63,105.645,92,103.5,105.05,110.02,111.54,112,107.36,109.131,110.04,108.51,110.32,109.77,109.9,111.76,114.86,114.42,115.44,113.715,111.87,113.66,112.5201,113.3,112.37,114.02,112.44,107.86,108.73,107.31,107.55,109.07,109.765,109.41,108.21,109.49,111.44,110.68,109.56,110.49,110.53,110.11,110.82,113.7,114.1,116.33,114.92,113.99,116.06,118.27,119.45,119.61,120.7,121.62,120.18,120.62,120.05,116.061,115.21,115.65,112.27,111,113.32,115.5,116.76,118.85,117.34,117.12,117.92,117.6,117.75,116.86,116.08,114.22,115.11,117.81,116.86,115.08,115.51,112.851,109.79,110.35,108.8,108.98,105.81,105.57,106.451,107.2,107.95,106.1807,106.86,107.18,104.82,102,102.41,99.87,96.43,96.76,97.34,98.8399,97.3,95.74,95.36,95.5,93.42,94.94,98.37,99.21,98.07,93.34,92.39,94.35,95.4,94.28,94.08,95.19,93.69,93.04,93.93,94.1,92.59,93.01,94.61,96.15,96.091,95.8,95.92,94.55,93.32,95.25,96.58,96.65,97.42,99.64,100.45,101.37,100.96,100.4,100.27,100.15,101.5,101.78,103.85,104.59,104.96,105.19,105.1401,105.21,105.9,104.89,105.06,104.88,108.6,108.88,108.2,110.27,109.42,109.2,108.121,108.17,108.83,108.66,110.8,111.33,109.73,106.94,106.23,106.06,105.52,104.62,104.51,103.91,95.68,94.25,92.51,92.4,93.68,93.82,92.68,91.85,92.59,92.11,92.46,89.47,90,91.65,93.01,93.89,93.57,94.52,95.67,96.84,98.11,98.64,99.245,98.82,98.33,96.63,97.45,97.55,98.96,98.68,98.46,98.48,97.1,96.75,97.03,96.07,95.3,95.03,94.676,95.35,95.25,92.65,91.5,92.14,93.63,94.3,95.33,94.46,94.37,95.62,96.05,96.73,97.12,96.84,97.32,98.5,98.6,99.34,99.735,99.13,98.31,96.92,96.42,102.75,102.82,103.68,104.41,104,104.77,105.28,106.18,107.16,108.01,107.76,107.85,107.78,108.08,109.21,108.34,109.02,108.36,107.85,108.53,107.68,106.68,106.31,106.29,105.5,105.64,105.62,106.82,107.51,107.07,105.24,103.13,102.53,107.24,108.6,113.49,114.04,113.25,112.51,112.441,114,111.55,111.55,112.34,113.43,111.8,111.8,112.28,112.63,112.69,113.13,113.51,114.72,116.2,116.75,115.72,117.13,116.78,117.45,113.8,116.33,116.28,117,117.31,113.31,114.1,113.45,113.2,110.53,111.23,109.55,108.11,109.46,109.7,108.05,105.83,106.55,104.08,106.1593,106.6,108.83,109.66,110.01,111.4,110.33,110.95,111.39,110.07,110.27,109.03,108.85,108.25,109.19,109.16,110.6,112.31,112.49,113.75,114.98,115.23,115.645,115.75,116.68,116.78,115.64,115.59,116.49,116.2,116.4,115.43,114.76,115.75,115.81,116.47,117.94,118.3,118.6,118.21,118.81,118.22,119.71,119.37,119.7346,119.77,119.5,120.28,121.6,121.6,120.66,120.62,127.01,127.78,128.16,128.9,130.45,131.22,131.12,132.05,132.75,133.25,134.62,134.8398,135.1,135.98,136.11,136.3,135.28,136.28,136.7,137.595,138.76,138.59,138.5959,138.79,138.82,137.05,138.64,138.82,138.84,139.025,140.26,139.89,140.23,139.73,139.76,140.61,140.35,138.62,140.62,143.19,143.5,143.01,143.05,143.17,143.81,143.45,143.27,142.9,140.06,141.01,141.05,140.87,141.11,140.45,141.16,141.85,143.18,143.87,143.3762,143.31,143.27,144.96,146.84,144.27,145.81,146.76,149.03,153.45,152.11,152.31,154.67,155.05,154.72,149.71,151.13,152.63,152.91,153.31,152.67,153.03,153.31,153.33,152.38,152.22,152.89,153.46,153.78,154.48,154.4],"c":[416.838,413.5,402.54,402.63,398.07,393.78,396.53,409.22,418.49,420.8,417.42,415.05,422.35,420.73,427.288,426.51,427.44,430.195,430.31,431.758,424.95,426.31,418.99,440.51,438.5,440.99,447.79,453.32,452.53,456.676,462.54,469.45,465.25,464.98,461.01,454.45,467.36,489.57,498.5,497.91,502.33,507.74,501.07,502.36,502.96,501.02,502.97,488.59,490.896,491.7,487.216,488.58,498.691,495.27,498.22,506.17,494.64,467.71,472.69,464.9,450.12,455.32,464.68,472.3,467.41,490.64,489.1,481.53,486.22,482.75,476.75,487.96,489.56,483.41,483.03,487.75,480.94,486.588,489.638,492.812,496.04,498.68,501.114,504.5,508.89,521.362,519.8675,524.96,531.91,525.958,529.876,516.678,524.896,522.702,520.03,526.75,525.449,520.92,512.492,520.56,519.048,520.01,520.634,528.16,524.991,518.629,519.55,515,521.136,519.8,523.74,533.4,545.96,556.07,551.23,566.322,565,567.901,560.02,566.43,565.55,561.36,560.54,554.43,557.5,554.99,550.77,544.46,549.02,570.09,567.67,563.9,560.09,554.52,561.02,553.13,540.98,543.93,540.0375,543.46,536.519,532.94,535.73,546.39,557.36,554.25,540.67,549.07,551.51,556.18,546.07,550.5,506.5,500.75,499.782,500.6,501.53,508.79,512.59,512.51,519.68,528.99,535.96,535.92,544.43,543.99,545.99,537.37,531.15,525.25,527.55,522.06,517.35,527.67,526.24,527.76,531.24,532.36,530.75,530.44,530.92,536.09,536.61,530.65,524.69,526.74,531.4,531.26,528.7,532.87,539.19,544.99,539.78,537.46,536.86,536.74,541.65,542.55,538.79,531.82,523.47,523.44,530.32,523.48,519.61,521.68,517.9599,519.01,524.94,531.17,531.699,524.75,567.77,571.94,594.09,592.33,590.09,591.48,592.58,600.96,594.41,592.33,587.99,585.5425,592.83,593.76,593.87,588.82,597.51,604.59,604.71,606.31,607.27,614.13,625.63,624.01,635.38,633,628.65,637.54,644.82,647.35,645.57,93.7,94.25,93.86,92.29,91.28,92.2,92.08,92.18,91.86,90.91,90.83,90.28,90.36,90.9,91.98,92.93,93.52,93.48,94.03,95.968,95.35,95.39,95.035,95.22,96.45,95.32,94.78,93.0899,94.43,93.939,94.72,97.19,97.03,97.671,99.02,98.38,98.15,95.6,96.13,95.59,95.12,94.96,94.48,94.74,95.99,95.97,97.24,97.5,97.98,99.16,100.53,100.57,100.58,101.32,101.54,100.889,102.13,102.25,102.5,103.3,98.94,98.12,98.97,98.36,97.99,101,101.43,101.66,101.63,100.86,101.58,101.79,100.96,101.06,102.64,101.75,97.87,100.75,100.11,100.75,99.18,99.9,99.62,99.62,98.75,100.8,101.02,100.73,99.81,98.75,97.54,96.26,97.67,99.76,102.47,102.99,104.83,105.22,105.11,106.74,107.34,106.98,108,109.4,108.6,108.86,108.7,109.01,108.83,109.7,111.25,112.82,114.18,113.99,115.47,114.67,116.31,116.47,118.625,117.6,119,118.93,115.07,114.63,115.93,115.49,115,112.4,114.12,111.95,111.62,109.73,108.225,106.745,109.41,112.65,111.78,112.94,112.54,112.01,113.99,113.91,112.52,110.38,109.33,106.25,106.26,107.75,111.89,112.01,109.25,110.22,109.8,106.82,105.99,108.72,109.55,112.4,112.98,113.1,109.14,115.31,118.9,117.16,118.63,118.65,119.56,119.94,118.93,119.72,122.02,124.88,126.46,127.08,127.83,128.715,128.45,129.495,133,132.17,128.79,130.415,128.46,129.09,129.36,128.54,126.41,126.6,127.14,124.51,122.24,124.45,123.59,124.95,127.04,128.47,127.495,125.9,127.21,126.69,123.38,124.24,123.25,126.37,124.43,124.25,125.32,127.35,126.01,125.6,126.56,127.1,126.85,126.3,126.78,126.17,124.75,127.6,126.91,128.62,129.67,130.28,132.65,130.56,128.64,125.15,128.95,128.7,125.8,125.01,125.26,127.62,126.32,125.865,126.01,128.95,128.77,130.19,130.07,130.06,131.39,132.54,129.62,132.045,131.78,130.28,130.535,129.96,130.12,129.36,128.65,127.8,127.42,128.88,128.59,127.17,126.92,127.6,127.3,127.88,126.6,127.61,127.03,128.11,127.5,126.75,124.53,125.425,126.6,126.44,126,125.69,122.57,120.07,123.28,125.66,125.61,126.82,128.51,129.62,132.07,130.75,125.22,125.16,124.5,122.77,123.38,122.99,122.37,121.3,118.44,114.64,115.4,115.13,115.52,119.72,113.49,115.24,115.15,115.96,117.16,116.5,115.01,112.65,105.76,103.12,103.74,109.69,112.92,113.29,112.76,107.72,112.34,110.37,109.27,112.31,110.15,112.57,114.21,115.31,116.28,116.41,113.92,113.45,115.21,113.4,114.32,115,114.71,112.44,109.06,109.95,109.58,110.38,110.78,111.31,110.78,109.5,112.12,111.6,111.79,110.21,111.86,111.04,111.73,113.77,113.76,115.5,119.08,115.28,114.55,119.27,120.53,119.5,121.18,122.57,122,120.92,121.06,120.57,116.77,116.11,115.72,112.34,114.175,113.69,117.29,118.78,119.3,117.75,118.88,118.03,117.81,118.3,117.34,116.28,115.2,119.03,118.28,118.23,115.62,116.17,113.18,112.48,110.49,111.34,108.98,106.03,107.33,107.23,108.61,108.03,106.82,108.74,107.32,105.26,105.35,102.71,100.7,96.45,96.96,98.53,99.96,97.39,99.52,97.13,96.66,96.79,96.3,101.42,99.44,99.99,93.42,94.09,97.34,96.43,94.48,96.35,96.6,94.02,95.01,94.99,94.27,93.7,93.99,96.64,98.12,96.26,96.04,96.88,94.69,96.1,96.76,96.91,96.69,100.53,100.75,101.5,103.01,101.87,101.03,101.12,101.17,102.26,102.52,104.58,105.97,105.8,105.92,105.91,106.72,106.13,105.67,105.19,107.68,109.56,108.99,109.99,111.12,109.81,110.96,108.54,108.66,109.02,110.44,112.04,112.1,109.85,107.48,106.91,107.13,105.97,105.68,105.08,104.35,97.82,94.83,93.74,93.64,95.18,94.19,93.24,92.72,92.79,93.42,92.51,90.34,90.52,93.88,93.49,94.56,94.2,95.22,96.43,97.9,99.62,100.41,100.35,99.86,98.46,97.72,97.92,98.63,99.03,98.94,99.65,98.83,97.34,97.46,97.14,97.55,95.33,95.1,95.91,95.55,96.1,93.4,92.04,93.59,94.4,95.6,95.89,94.99,95.53,95.94,96.68,96.98,97.42,96.87,98.79,98.78,99.83,99.87,99.96,99.43,98.66,97.34,96.67,102.95,104.34,104.21,106.05,104.48,105.79,105.87,107.48,108.37,108.81,108,107.93,108.18,109.48,109.38,109.22,109.08,109.36,108.51,108.85,108.03,107.57,106.94,106.82,106,106.1,106.73,107.73,107.7,108.36,105.52,103.13,105.44,107.95,111.77,115.57,114.92,113.58,113.57,113.55,114.62,112.71,112.88,113.09,113.95,112.18,113.05,112.52,113,113.05,113.89,114.06,116.05,116.3,117.34,116.98,117.63,117.55,117.47,117.12,117.06,116.6,117.65,118.25,115.59,114.48,113.72,113.54,111.49,111.59,109.83,108.84,110.41,111.06,110.88,107.79,108.43,105.71,107.11,109.99,109.95,110.06,111.73,111.8,111.23,111.79,111.57,111.46,110.52,109.49,109.9,109.11,109.95,111.03,112.12,113.95,113.3,115.19,115.19,115.82,115.97,116.64,116.95,117.06,116.29,116.52,117.26,116.76,116.73,115.82,116.15,116.02,116.61,117.91,118.99,119.11,119.75,119.25,119.04,120,119.99,119.78,120,120.08,119.97,121.88,121.94,121.95,121.63,121.35,128.75,128.53,129.08,130.29,131.53,132.04,132.42,132.12,133.29,135.02,135.51,135.345,135.72,136.7,137.11,136.53,136.66,136.93,136.99,139.79,138.96,139.78,139.34,139.52,139,138.68,139.14,139.2,138.99,140.46,140.69,139.99,141.46,139.84,141.42,140.92,140.64,140.88,143.8,144.12,143.93,143.66,143.7,144.77,144.02,143.66,143.34,143.17,141.63,141.8,141.05,141.83,141.2,140.68,142.44,142.27,143.64,144.54,143.6508,143.79,143.65,146.6,147.51,147.06,146.53,148.96,153,153.96,153.26,153.95,156.1,155.7,155.47,150.25,152.54,152.96,153.99,153.8,153.34,153.87,153.61,153.67,152.76,153.18,155.45,153.93,154.45,155.37,154.99],"v":[12761100,17182800,17169500,11220100,13133000,12044500,20661300,13966200,16780900,8604600,9786600,10647800,12592300,10050200,11653300,9984400,8639900,7733500,7106800,7817100,9597200,7421300,13192700,21140600,8196200,7148300,8859200,11050800,11534200,7366100,9813700,11387700,11959200,10673500,9134900,9530900,13015500,31497900,27013300,17510500,12939500,18232800,12810300,11995700,8721700,7954700,11820200,15149600,10986000,8559200,9724900,11854600,12322600,8441700,12840200,12167400,26542700,32096300,14430400,10672700,19418100,14263600,16316500,14447900,24975100,27218100,13012300,11319900,8472200,8144300,9291300,12638700,10328000,11526900,9245300,11153300,10389900,10775900,9950100,9562100,9353500,11431200,8967900,9056900,10376500,14218100,19073700,11204400,13741600,12064000,19658600,22707400,12648700,9846300,9817500,8736700,9471900,7977700,9379300,9975600,8123300,7295600,7043600,10086400,11354300,8748000,7462100,6925600,9358100,7990200,8189700,14335100,12980300,11361700,16876600,16106000,13493200,15985000,12298300,11446200,9938200,12847100,9367500,11886500,10092600,8210800,20209400,11439600,15586200,17903800,5984100,7286000,8067300,9058200,7967300,8381600,14016700,14736100,11328900,9233200,9969600,10892000,13517600,11877200,13987100,8188500,15240700,11733100,13570900,14401400,15334100,19817100,38054400,17957500,24232200,16599900,14338000,13452900,11726600,9205900,13224300,12341400,10080600,11003600,10978500,9747300,9294700,11206000,10923500,9956600,10318200,8284000,9864900,10781500,13284600,8527900,9255000,7145100,6624600,7883200,6378000,9972300,7118800,9205100,8471400,7126600,7487400,8027000,7442800,13358800,12703600,10081900,10706000,7929700,7163000,6023900,7170000,6443600,5798000,9830400,10351800,8710300,7363200,8559000,9704200,7345500,9517500,7670200,10154800,6519600,7234400,14105000,27139700,13938400,23910200,12049200,16308600,8716000,6839800,10252400,13377300,10102300,8224900,10414200,7614600,5704900,5943000,8244500,9866300,11348400,8387000,7030700,7170000,8293200,12459500,11267200,13445500,20143600,13191100,10453900,11981500,10850200,12497800,75414997,62777000,45681000,54749000,54525000,35561000,29726000,33514000,35528000,100898000,43694000,39036000,36869000,32629000,64029000,49589000,38223000,28465000,22891800,56468000,65222000,36436000,39686000,34018000,42810000,45477900,53502000,57298000,49988000,39079000,55197000,92918000,45729000,43469000,55318000,43143000,33010000,56843000,48511000,39958000,55933000,38558000,46711000,41865000,36585000,33795000,31916000,28116000,48951000,47572000,69274700,52612800,33421900,44102400,40144700,33119800,46827400,68389800,44567000,53491400,125233100,85594800,58353200,46277800,189560600,100741900,62353100,62626100,61216500,66818200,60892400,37023900,70838500,52722000,63347200,59725174,99565849,62370501,49766312,55264139,51491286,47757828,43469585,37051182,42094183,57404674,77376525,66331592,53583368,63688562,100933600,72154523,68179688,77517279,94623904,68263146,71074674,47053916,34187701,48060949,52687879,40654793,44639285,52282550,41574365,37435905,34968457,33691535,27195547,27442252,46942431,59522855,44063595,46746712,44223978,41869160,43395537,57179298,47450824,68840440,40831886,24814402,83814037,59348940,43063440,42155776,38318895,57664850,60208036,44565318,41471578,56028138,67218082,60790733,53411773,59006218,88429770,45167549,26028419,14479611,33720951,27598920,29881477,41403351,53204626,64285491,65797116,40105934,59364547,53315099,49650790,67091928,48956588,60013996,78513345,49899907,48575897,53796409,46464828,55614979,95568749,146477063,84436432,83745461,62739100,51915749,70149743,42246245,43706567,38889797,62008506,73561797,74474466,54272219,63152405,44891737,37362381,48948419,70974110,69228130,74711746,91287529,62014847,48096663,37816283,31666340,56517146,72842060,88528487,68856582,68938974,48362719,51827283,35874300,51023104,65270945,45809490,68695136,37709674,32842304,51655177,47572869,39546151,47099670,42090553,40621437,32220131,37193975,35012268,37329243,32483974,40187953,36365123,25524593,28970419,28368987,51957046,47054310,32435057,37654505,45770902,44525905,96954207,118923970,63386083,83195423,58512638,50988278,49271416,72141010,43940895,55550382,42035757,48160032,34694235,45203456,38208034,50882918,44633240,36454932,39730364,45595972,70697560,45833246,30733309,50884452,32112797,33667627,30983542,38450118,35626800,52674786,56075420,39087250,35390887,36886246,43988946,31494131,32918071,35407220,54716887,34039345,30268863,55280855,31938100,44066841,49161427,44370682,30238811,27210952,28060431,46946811,60761614,78595038,61354474,41440538,31768139,33649200,36222447,46164710,58900203,76756427,115450607,50999452,42162332,44455540,33618097,37011653,33628268,42884953,69975968,124138623,98384461,52903040,38670405,54951597,97082814,101685610,48535789,42929516,40884745,34560708,48286510,68501622,128275471,162206292,103601599,96774611,84616056,53164407,56229271,76845860,61888812,53233940,49996311,54843626,85010804,62892831,49915473,58363431,43341155,37173489,64112641,74285291,50221965,50346159,35756716,50219475,56151926,50782189,73365384,65041596,63929100,58019758,52064743,48856977,46765550,61979577,52766140,30467204,33049256,44462449,37673452,39232609,29759153,48967763,42326974,41654089,59366914,66333781,69884400,85551352,51227334,49365254,32203267,45518976,44886050,39552680,33042283,33871405,59127931,45217971,32525579,45812403,38106701,27583101,46674697,43295820,34287096,32482528,42803172,21388308,13046445,39180322,34852374,33386563,41569509,57776977,32084249,34309450,46361357,29212727,46886161,65003609,53323105,56238467,44772827,96453327,47590610,32789367,32657354,13596680,26704210,30931243,25213777,40912316,67649387,55790992,68457388,81094428,70798016,49739377,49154227,62439631,63170127,79833891,53087747,72334416,52161463,65800467,51794525,75077002,133369674,55678825,64416504,40943541,37357215,45964294,46471652,46418064,54021375,44331195,42343601,50074711,40351381,49057916,44863243,39020983,35374173,34280758,31942633,36255745,27582659,28991131,35216277,50407147,33169560,36955742,46055100,35915810,31182194,27201683,33513577,27408237,25076062,40067734,38303493,34420705,44205171,35502678,32444375,25703495,26132955,19411372,31190083,45601149,25888449,25873950,37356204,26578652,26404077,31801870,23581740,29407518,27232325,33257316,25473923,46938969,60821461,32384879,30611030,31552525,33683121,28031588,56016165,114602142,82242690,68531478,48160104,56831277,41025475,35890500,43699886,32936436,33686836,28719109,76314690,44392765,61259756,46916939,42062391,30442100,32025968,38018643,35140174,38642108,56331159,36341240,42307212,29173285,40191600,28504888,23292504,22409450,20848131,26601354,31712936,38020494,31931944,29445227,31326815,61008219,34411901,35546358,29219122,32240187,75311356,46622188,40444914,36531006,35836356,26026540,27705210,30949090,25139558,28912103,23794945,24167463,25892171,38918997,30136990,36493867,23779924,26275968,32702028,28313669,40382921,56239822,92344820,39869839,27733688,38167871,33816556,30202641,27408650,40553402,28037220,26315204,24008505,27484506,18660434,25868209,33794448,25355976,21984703,25368072,25820230,21257669,23675081,25086248,27766291,24970300,24863945,29662406,26701523,26802450,26880391,42364328,53002026,46556984,45292770,62176190,112340318,90613177,79886911,47023046,34514269,36003185,31073984,52481151,29869442,24607412,29641085,35886990,36379106,21701760,29736835,21453089,28779313,24358443,36235956,64041043,37586787,35192406,35652191,23624896,24553478,20034594,24125801,23192665,23538673,48128970,66134219,34562045,37861662,26419398,43825812,28331709,26932602,30836997,32560000,24254179,59176361,57134541,34143898,51175504,32264510,58840522,27632003,28428917,29264571,25965534,27426394,11475922,27193983,28528750,36162258,37086862,26527997,34324540,26195462,29998719,27068316,34402627,26374377,43733811,34031834,46524544,44351134,27779423,21424965,23783165,26085854,14249484,18296855,20905892,15039519,30586265,28781865,21118116,22193587,31751900,33561948,24462051,27588593,27086220,26111948,34439843,23712961,25597291,32597892,22050218,23211038,32586673,26337576,20562944,30377503,49200993,111985040,33710411,24507301,26845924,38183841,23004072,28349859,20065458,23035421,33226223,35623100,22584555,22198197,24507156,20836932,20788186,21776585,20257426,23482860,36414585,26210984,21571121,21750044,17446297,18707236,22155904,19612801,17421717,15309065,25691774,19231998,43884952,21542038,39529912,25860165,20346301,22395563,23575094,33374805,29189955,21207252,19661651,19985714,19891354,27717854,21149034,16658543,18933397,30379376,20350000,17822880,16582094,14697544,17328375,23319562,17320928,17116599,18216472,19614287,13948980,20247187,32818760,39752670,45142806,23275690,26787359,48339210,35942435,25670456,25596687,32221756,25700983,19904679,49482818,33159664,26733798,22340069,19430358,19118319,19044463,21632202,20034934,23162873,16180143,27285861,24803858,26249630,20678772,20771367],"s":"ok"};

            if (!this.cacheResult[params.resolution]) {
                this.cacheResult[params.resolution] = [];
            }

            let barCache = this.cacheResult[params.resolution];

            if (data.s !== 'ok' && data.s !== 'no_data') {
                defer.reject(data.errmsg);
                return;
            }

            var bars = [];
            var meta = {
                noData: false,
            };

            if (data.s === 'no_data' || data.c.length == 0) {
                meta.noData = true;
                meta.nextTime = data.nextTime; // 只有在请求的时间段内没有数据时，才应该被设置
            } else {
                var volumePresent = data.v !== undefined;
                var ohlPresent = data.o !== undefined;

                for (var i = 0; i < data.t.length; ++i) {
                    var barValue = {
                        time: data.t[i],
                        close: Number(data.c[i]),
                        open: Number(data.c[i]),
                        high: Number(data.c[i]),
                        low: Number(data.c[i]),
                    };
                    // console.log(TimeUtil.formatDate(barValue.time, 'yyyy-MM-dd HH:mm:ss'), barValue);
                    if (ohlPresent) {
                        barValue.open = Number(data.o[i]);
                        barValue.high = Number(data.h[i]);
                        barValue.low = Number(data.l[i]);
                    }

                    if (volumePresent) {
                        barValue.volume = Number(data.v[i]);
                    }

                    barValue.timeTxt = TimeUtil.formatDate(new Date(data.t[i]), 'yyyy-MM-dd HH:mm:ss');

                    if (barCache.length > 0) {
                        if (barValue.time < barCache[0].time) {
                            barCache = [barValue].concat(barCache);
                        } else if (barValue.time > barCache[barCache.length - 1].time) {
                            barCache[barCache.length] = barValue;
                        } else if (barValue.time == barCache[barCache.length - 1].time) {
                            barCache[barCache.length - 1] = barValue;
                        }
                    } else {
                        barCache[barCache.length] = barValue;
                    }

                    bars.push(barValue);
                }
            }

            this.cacheResult[params.resolution] = barCache;

            defer.resolve({
                bars: bars,
                meta: meta,
            });

        })

        return defer.promise();

    }
    /**
     * 订阅K线数据。图表库将调用onRealtimeCallback方法以更新实时数据
     * @param {*Object 商品信息对象} symbolInfo 
     * @param {*String 分辨率} resolution 
     * @param {*Function(bar) bar: object{time, close, open, high, low, volume}} onRealtimeCallback 
     * @param {*Object} subscriberUID 
     * @param {*Function()将在bars数据发生变化时执行} onResetCacheNeededCallback 
     */
    subscribeBars(symbolInfo, resolution, onRealtimeCallback, subscriberUID, onResetCacheNeededCallback) {
        console.log('------subscribeBars-------');
    }
    /**
     * 取消订阅K线数据
     * @param {*Object} subscriberUID 
     */
    unsubscribeBars(subscriberUID) {
        console.log('------unsubscribeBars-------');
        socket.off('tradingView');
    }
    /**
     * 当图表需要知道服务器时间时则调用此函数
     * @param {*Function(unixTime)} callback 
     */
    getServerTime(callback) {
        console.log('------getServerTime-------');
        if (!this.configurationData.supports_time) {
            return;
        }
        // 获取服务器时间
        socket.emit('serverTime')
        socket.on('serverTime', function(data) {
            let serverTime = parseInt(data / 1000, 10);
            console.log('=====', serverTime);
            callback(serverTime);
        })
    }
}

export default UDFCompatibleDatafeed;